# 任务卡系统提示词

帮助 AI 在项目中搭建和使用任务卡系统，管理任务进度。

## 使用方法

复制下方代码块中的内容，粘贴给你的 AI 助手，AI 会自动为你的项目搭建任务卡系统。

---

## 提示词

```
# 任务卡系统

## 什么是任务卡系统

任务卡系统是一套分散式任务管理方案。任务卡按需创建，哪个模块需要就在哪里建，不需要提前为所有模块搭建。

## 核心原则

- **按需创建**：只在需要管理任务的模块下创建 `tasks/` 目录
- **分散存储**：每个模块独立管理自己的任务，避免 Git 冲突
- **就近原则**：任务卡与相关代码放在一起

## 何时创建任务卡

当你收到一个需要追踪的任务时：
1. 确定任务归属的模块
2. 检查该模块是否已有 `tasks/` 目录
3. 如果没有，为该模块初始化任务卡系统
4. 创建任务卡并登记到任务列表

## 初始化模块的任务卡系统

当某个模块首次需要任务管理时，执行以下步骤：

### 1. 创建任务目录

在该模块下创建 `tasks/` 目录。

### 2. 创建任务列表文件

创建 `tasks/TASK_LIST.md`，内容格式：

---BEGIN TASK_LIST_TEMPLATE---
# [模块名] 任务列表

> 模块路径: `实际模块路径/`
>
> 本列表仅管理该模块相关的任务，新任务添加到表格顶部。

## 任务列表

| ID | 任务名称 | 类型 | 优先级 | 状态 | 创建时间 | 完成时间 |
|----|----------|------|--------|------|----------|----------|

---

> 状态: `TODO` 待处理 | `WIP` 进行中 | `DONE` 已完成 | `CANCEL` 已取消
>
> 类型: `DEV` 开发 | `FIX` 修复 | `OPS` 运维 | `DOC` 文档 | `REF` 重构 | `TEST` 测试
>
> 优先级: `P0` 紧急 | `P1` 高 | `P2` 中 | `P3` 低
---END TASK_LIST_TEMPLATE---

### 3. 定义模块前缀

为该模块定义唯一的任务 ID 前缀（2-4个大写字母），用于任务卡命名。例如：
- 认证模块：`AUTH`
- 支付模块：`PAY`
- 用户模块：`USER`

## 创建任务卡

在模块的 `tasks/` 目录下创建任务卡文件，命名格式：`[前缀]-[4位序号].md`

---BEGIN TASK_CARD_TEMPLATE---
# [前缀]-0001: 任务名称

## 基本信息

| 字段 | 值 |
|------|-----|
| **类型** | DEV |
| **优先级** | P1 |
| **状态** | TODO |
| **创建时间** | YYYY-MM-DD |
| **完成时间** | - |
| **依赖任务** | - |

## 任务介绍

### 背景

简要描述任务产生的背景和原因。

### 目标

明确描述任务要达成的目标。

## 验收要求

- [ ] 要求1：具体的验收条件
- [ ] 要求2：测试用例通过
- [ ] 要求3：CI检查通过

## 备注

> 其他需要说明的信息
---END TASK_CARD_TEMPLATE---

创建任务卡后，在 `TASK_LIST.md` 表格顶部添加一行记录。

## 执行任务

1. 将任务卡和列表中的状态改为 `WIP`
2. 按照验收要求逐项完成
3. 完成后将状态改为 `DONE`，填写完成时间

## 查找任务

```bash
# 查找所有进行中的任务
grep -r "WIP" --include="TASK_LIST.md" .

# 按ID查找任务卡
find . -name "AUTH-0001.md"
```

## 初次搭建

如果项目中还没有任何 `tasks/` 目录，说明是首次引入任务卡系统。此时需要：

1. 在项目的规则文件（`CLAUDE.md`、`AGENTS.md`、`.cursorrules` 或其他 AI 配置文件）中添加以下内容：

---BEGIN RULE_TEMPLATE---
## 任务卡系统

本项目使用分散式任务卡系统管理任务。

### 使用方式

- 任务卡按需创建，在需要的模块下建立 `tasks/` 目录
- 任务 ID 格式：`[模块前缀]-[4位序号]`（如 `AUTH-0001`）
- 新任务添加到 `TASK_LIST.md` 表格顶部

### 已有模块前缀

| 模块 | 前缀 | 路径 |
|------|------|------|
| （按需添加） | | |
---END RULE_TEMPLATE---

2. 当后续为新模块创建任务卡时，在规则文件的"已有模块前缀"表格中登记该模块
```

---

## 样式预览

以下是任务卡和任务列表的实际渲染效果：

### 任务列表样式

# 认证模块 任务列表

> 模块路径: `src/auth/`
>
> 本列表仅管理该模块相关的任务，新任务添加到表格顶部。

#### 任务列表

| ID | 任务名称 | 类型 | 优先级 | 状态 | 创建时间 | 完成时间 |
|----|----------|------|--------|------|----------|----------|
| AUTH-0002 | [添加双因素认证](./tasks/AUTH-0002.md) | DEV | P1 | WIP | 2025-12-04 | - |
| AUTH-0001 | [修复登录超时问题](./tasks/AUTH-0001.md) | FIX | P0 | DONE | 2025-12-01 | 2025-12-03 |

---

> 状态: `TODO` 待处理 | `WIP` 进行中 | `DONE` 已完成 | `CANCEL` 已取消
>
> 类型: `DEV` 开发 | `FIX` 修复 | `OPS` 运维 | `DOC` 文档 | `REF` 重构 | `TEST` 测试
>
> 优先级: `P0` 紧急 | `P1` 高 | `P2` 中 | `P3` 低

---

### 任务卡样式

# AUTH-0002: 添加双因素认证

#### 基本信息

| 字段 | 值 |
|------|-----|
| **类型** | DEV |
| **优先级** | P1 |
| **状态** | WIP |
| **创建时间** | 2025-12-04 |
| **完成时间** | - |
| **依赖任务** | AUTH-0001 |

#### 任务介绍

##### 背景

用户反馈账户安全性不足，竞品已普遍支持双因素认证。产品决定在 v2.0 版本中加入此功能以提升安全性。

##### 目标

为用户登录流程添加可选的双因素认证（2FA），支持 TOTP 和短信验证两种方式。

#### 验收要求

- [x] 用户可在设置页面开启/关闭 2FA
- [x] 支持 Google Authenticator 等 TOTP 应用
- [ ] 支持短信验证码作为备选方案
- [ ] 提供恢复码机制防止用户锁定
- [ ] 单元测试覆盖率 > 80%
- [ ] 通过安全团队 Code Review

#### 备注

> 短信服务商选型待定，暂时优先实现 TOTP 方式。

---

## 配套模板

本仓库的 `templates/` 目录包含可直接使用的模板文件：

```
templates/
├── TASK_LIST.md        # 任务列表模板
└── cards/
    └── TASK-0001.md    # 任务卡模板
```
